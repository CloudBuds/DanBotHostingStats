global.config=require("./config.json"),global.enabled=require("./enable.json"),global.users=[],global.fs=require("fs"),global.chalk=require("chalk");const nodemailer=require("nodemailer");global.axios=require("axios"),global.transport=nodemailer.createTransport({host:config.Email.Host,port:config.Email.Port,auth:{user:config.Email.User,pass:config.Email.Password}}),require("./nodestatsChecker");let db=require("quick.db");global.Discord=require("discord.js"),global.fs=require("fs"),global.moment=require("moment"),global.userData=new db.table("userData"),global.settings=new db.table("settings"),global.webSettings=new db.table("webSettings"),global.domains=new db.table("linkedDomains"),global.nodeStatus=new db.table("nodeStatus"),global.userPrem=new db.table("userPrem"),global.nodeServers=new db.table("nodeServers"),global.codes=new db.table("redeemCodes"),global.lastBotClaim=new db.table("lastBotClaim"),global.nodePing=new db.table("nodePing"),global.client=new Discord.Client({restTimeOffset:0,disableMentions:"everyone",restWsBridgetimeout:100,partials:["MESSAGE","CHANNEL","REACTION"]}),global.bot=client,global.pollPingLastUsed=0,fs.readdir("./bot/discord/events/",(e,o)=>{(o=o.filter(e=>e.endsWith(".js"))).forEach(e=>{const o=require(`./bot/discord/events/${e}`);client.on(e.split(".")[0],o.bind(null,client)),delete require.cache[require.resolve(`./bot/discord/events/${e}`)]})}),global.createList={},global.createListPrem={},fs.readdir("./create-free/",(e,o)=>{(o=o.filter(e=>e.endsWith(".js"))).forEach(e=>{require(`./create-free/${e}`)})}),fs.readdir("./create-premium/",(e,o)=>{(o=o.filter(e=>e.endsWith(".js"))).forEach(e=>{delete require.cache[require.resolve(`./create-premium/${e}`)],require(`./create-premium/${e}`)})});const CAPSNUM="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890";global.getPassword=(()=>{for(var e="";e.length<16;)e+=CAPSNUM[Math.floor(Math.random()*CAPSNUM.length)];return e}),client.login(config.DiscordBot.Token),setInterval(async()=>{users.length=0,axios({url:"https://panel.danbot.host/api/application/users?per_page=9999999999999",method:"GET",followRedirect:!0,maxRedirects:5,headers:{Authorization:"Bearer "+config.Pterodactyl.apikey,"Content-Type":"application/json",Accept:"Application/vnd.pterodactyl.v1+json"}}).then(e=>{users.push(...e.data.data)}).catch(e=>{})},6e5),process.on("unhandledRejection",(e,o)=>{console.log("[antiCrash] :: Unhandled Rejection/Catch"),console.log(e,o)}),process.on("uncaughtException",(e,o)=>{console.log("[antiCrash] :: Uncaught Exception/Catch"),console.log(e,o)}),process.on("uncaughtExceptionMonitor",(e,o)=>{console.log("[antiCrash] :: Uncaught Exception/Catch (MONITOR)"),console.log(e,o)}),process.on("multipleResolves",(e,o,l)=>{console.log("[antiCrash] :: Multiple Resolves"),console.log(e,o,l)});